<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Helix Visualization</title>
  <link rel="stylesheet" href="pico.min.css">
  <style>
    html, body { height: 100%; margin: 0; }
    #plot { width: 100%; height: 90vh; }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 1rem;
    }
  </style>
</head>
<body>
  <header>
    <div id="params"></div>
    <label>
      <input type="checkbox" id="doubleHelix" checked>
      Double Helix
    </label>
  </header>
  <div id="plot"></div>

  <script src="plotly-3.1.0.min.js"></script>
  <script src="helper_functions.js"></script>
  <script src="plottinghelix.js"></script>
  <script>
    const params = Object.fromEntries(new URLSearchParams(window.location.search).entries());
    const L = parseFloat(params.L);
    const theta = parseFloat(params.theta);
    const tau = parseFloat(params.tau);
    const segments = parseInt(params.segments);
    const pipeDiameter = parseFloat(params.pipeDiameter);

    document.getElementById("params").innerHTML =
      `<strong>L:</strong> ${L.toFixed(2)} mm, 
       <strong>θ:</strong> ${theta.toFixed(2)}°, 
       <strong>τ:</strong> ${tau.toFixed(2)}°, 
       <strong>segments:</strong> ${segments}`;

    const checkbox = document.getElementById('doubleHelix');
    function render() {
      PlottingHelix.plotHelix(L, theta, tau, segments, pipeDiameter, 10, checkbox.checked, false);
    }
    checkbox.addEventListener('change', render);
    render();
  </script>
</body>
</html>
